
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Image Services Â· Livingdocs Technical Documentation</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Livingdocs">
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="../../reference-docs/editor-styleguide/styleguide.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../getting_started.html">
            
                <a href="../../getting_started.html">
            
                    
                    Getting started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../walkthroughs/getting-started-with-local-development.html">
            
                <a href="../../walkthroughs/getting-started-with-local-development.html">
            
                    
                    Setting up Livingdocs locally
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../GLOSSARY.html">
            
                <a href="../../GLOSSARY.html">
            
                    
                    Glossary
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Livingdocs Design</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../../reference-docs/common-designs/create_designs.html">
            
                <a href="../../reference-docs/common-designs/create_designs.html">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../../reference-docs/common-designs/component_config.html">
            
                <a href="../../reference-docs/common-designs/component_config.html">
            
                    
                    Livingdocs components
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../../reference-docs/common-designs/design_config.html">
            
                <a href="../../reference-docs/common-designs/design_config.html">
            
                    
                    Design configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../../reference-docs/common-designs/list_example.html">
            
                <a href="../../reference-docs/common-designs/list_example.html">
            
                    
                    Bullet List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../document-migrations/migrations.html">
            
                <a href="../document-migrations/migrations.html">
            
                    
                    Design migrations
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Livingdocs Customizations</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../../walkthroughs/add_customizations.html">
            
                <a href="../../walkthroughs/add_customizations.html">
            
                    
                    Register customizations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../../walkthroughs/add_customizations.html">
            
                <a href="../../walkthroughs/add_customizations.html#server">
            
                    
                    Server
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.1" data-path="../../reference-docs/server-configuration/metadata.html">
            
                <a href="../../reference-docs/server-configuration/metadata.html">
            
                    
                    Metadata
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.2" data-path="../../reference-docs/server-extensions/add-custom-include.html">
            
                <a href="../../reference-docs/server-extensions/add-custom-include.html">
            
                    
                    Adding Includes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.3" data-path="../../reference-docs/server-extensions/events.html">
            
                <a href="../../reference-docs/server-extensions/events.html">
            
                    
                    Available Events
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.4" data-path="../../reference-docs/server-configuration/config.html">
            
                <a href="../../reference-docs/server-configuration/config.html">
            
                    
                    Configure the server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.5" data-path="../../reference-docs/server-configuration/channel-config.html">
            
                <a href="../../reference-docs/server-configuration/channel-config.html">
            
                    
                    Configure channels
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.6" data-path="../../reference-docs/server-extensions/publish-hooks.html">
            
                <a href="../../reference-docs/server-extensions/publish-hooks.html">
            
                    
                    Publish and Unpublish Hooks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.7" data-path="../../reference-docs/server-public-api/routing-system.html">
            
                <a href="../../reference-docs/server-public-api/routing-system.html">
            
                    
                    Routing system
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../../walkthroughs/add_customizations.html">
            
                <a href="../../walkthroughs/add_customizations.html#editor">
            
                    
                    Editor
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.3.1" data-path="../../reference-docs/editor-configuration/metadata.html">
            
                <a href="../../reference-docs/editor-configuration/metadata.html">
            
                    
                    Metadata
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.2" data-path="../../reference-docs/editor-configuration/search-filters.html">
            
                <a href="../../reference-docs/editor-configuration/search-filters.html">
            
                    
                    Dashboard search filters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.3" data-path="../../reference-docs/editor-configuration/text-editing.html">
            
                <a href="../../reference-docs/editor-configuration/text-editing.html">
            
                    
                    Cofigure text editing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.4" data-path="../../reference-docs/editor-configuration/image-cropping.html">
            
                <a href="../../reference-docs/editor-configuration/image-cropping.html">
            
                    
                    Configure image cropping
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.5" data-path="../../reference-docs/editor-configuration/editing-features.html">
            
                <a href="../../reference-docs/editor-configuration/editing-features.html">
            
                    
                    Configure editing features
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../metadata/metadata-examples.html">
            
                <a href="../metadata/metadata-examples.html">
            
                    
                    Metadata Example (editor and server)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="../../reference-docs/server-print-api/print-api.html">
            
                <a href="../../reference-docs/server-print-api/print-api.html">
            
                    
                    Print API
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Devops</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../../setup-and-deployment/self-hosting.html">
            
                <a href="../../setup-and-deployment/self-hosting.html">
            
                    
                    Hosting Livingdocs
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="../../setup-and-deployment/hardware-requirements.html">
            
                <a href="../../setup-and-deployment/hardware-requirements.html">
            
                    
                    Hardware Requirements
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="../../setup-and-deployment/high-availability/">
            
                <a href="../../setup-and-deployment/high-availability/">
            
                    
                    Architecture
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.2.1" data-path="../../setup-and-deployment/high-availability/high-availability-setup.html">
            
                <a href="../../setup-and-deployment/high-availability/high-availability-setup.html">
            
                    
                    high-availability
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="../../setup-and-deployment/docker/">
            
                <a href="../../setup-and-deployment/docker/">
            
                    
                    Docker
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.3.1" data-path="../../setup-and-deployment/docker/build-docker-images.html">
            
                <a href="../../setup-and-deployment/docker/build-docker-images.html">
            
                    
                    Build docker images
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.1.4" data-path="../../setup-and-deployment/external-services.html">
            
                <a href="../../setup-and-deployment/external-services.html">
            
                    
                    External services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.5" data-path="../../setup-and-deployment/proxy.html">
            
                <a href="../../setup-and-deployment/proxy.html">
            
                    
                    Proxy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.6" data-path="../../setup-and-deployment/npm/access-private-npm-modules.html">
            
                <a href="../../setup-and-deployment/npm/access-private-npm-modules.html">
            
                    
                    NPM Tokens
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../../reference-docs/server-configuration/design-servers.html">
            
                <a href="../../reference-docs/server-configuration/design-servers.html">
            
                    
                    Design Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../../reference-docs/maintenance/how-to-do-a-load-test.html">
            
                <a href="../../reference-docs/maintenance/how-to-do-a-load-test.html">
            
                    
                    Load Testing
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Administration</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../../walkthroughs/create-users.html">
            
                <a href="../../walkthroughs/create-users.html">
            
                    
                    Create Users
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="../../reference-docs/server-configuration/logging.html">
            
                <a href="../../reference-docs/server-configuration/logging.html">
            
                    
                    Logs
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Livingdocs core development</li>
        
        
    
        <li class="chapter " data-level="6.1" >
            
                <span>
            
                    
                    Editor
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.1" data-path="../../reference-docs/editor-styleguide/styleguide.html">
            
                <a href="../../reference-docs/editor-styleguide/styleguide.html">
            
                    
                    Styleguide
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="6.1.2" data-path="image-services.html">
            
                <a href="image-services.html">
            
                    
                    Image Services
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.2" >
            
                <span>
            
                    
                    Server
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.2.1" data-path="../../reference-docs/server-editing-api/">
            
                <a href="../../reference-docs/server-editing-api/">
            
                    
                    Editing API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.2.1.1" data-path="../../reference-docs/server-editing-api/api_basics.html">
            
                <a href="../../reference-docs/server-editing-api/api_basics.html">
            
                    
                    Basics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.1.2" data-path="../../reference-docs/server-editing-api/api_cors.html">
            
                <a href="../../reference-docs/server-editing-api/api_cors.html">
            
                    
                    CORS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.1.3" data-path="../../reference-docs/server-editing-api/api_errors.html">
            
                <a href="../../reference-docs/server-editing-api/api_errors.html">
            
                    
                    Error
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.1.4" data-path="../../reference-docs/server-editing-api/editing_api_authentication.html">
            
                <a href="../../reference-docs/server-editing-api/editing_api_authentication.html">
            
                    
                    Authentication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.1.5" data-path="../../reference-docs/server-editing-api/editing_api_design.html">
            
                <a href="../../reference-docs/server-editing-api/editing_api_design.html">
            
                    
                    Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.1.6" data-path="../../reference-docs/server-editing-api/editing_api_list.md">
            
                <span>
            
                    
                    Lists
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.1.7" data-path="../../reference-docs/server-editing-api/editing_api_documents.html">
            
                <a href="../../reference-docs/server-editing-api/editing_api_documents.html">
            
                    
                    Documents
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.1.8" data-path="../../reference-docs/server-editing-api/editing_api_revisions.html">
            
                <a href="../../reference-docs/server-editing-api/editing_api_revisions.html">
            
                    
                    Revisions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.1.9" data-path="../../reference-docs/server-editing-api/editing_api_publications.html">
            
                <a href="../../reference-docs/server-editing-api/editing_api_publications.html">
            
                    
                    Publications
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.1.10" data-path="../../reference-docs/server-editing-api/editing_api_users.html">
            
                <a href="../../reference-docs/server-editing-api/editing_api_users.html">
            
                    
                    Users
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.1.11" data-path="../../reference-docs/server-editing-api/editing_api_spaces.html">
            
                <a href="../../reference-docs/server-editing-api/editing_api_spaces.html">
            
                    
                    Projects
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.1.12" data-path="../../reference-docs/server-editing-api/editing_api_hooks.html">
            
                <a href="../../reference-docs/server-editing-api/editing_api_hooks.html">
            
                    
                    Hooks
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="../../reference-docs/maintenance/release-management/">
            
                <a href="../../reference-docs/maintenance/release-management/">
            
                    
                    Releases
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.3.1" data-path="../../reference-docs/maintenance/release-management/deployment-pipeline.html">
            
                <a href="../../reference-docs/maintenance/release-management/deployment-pipeline.html">
            
                    
                    Deployment
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation" style="background-color: #3a2f3c; height: 50px; position: fixed; width: 100%">
    <a href="https://www.livingdocs.io"><img src="https://livingdocs.io/assets/images/livingdocs-logo-inverted.svg" style="width: 200px; padding: 15px 40px" /></a>
    

    <!-- Title -->
    <h1 style="position: absolute; top: 0; left: 30%; color: white">
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Image Services</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="image-services">Image Services</h1>
<h2 id="overview">Overview</h2>
<p>Livingdocs allows users to upload pictures and then subsequently shows them. There are 3 parts here:</p>
<ol>
<li>the <strong>storage</strong> of the images</li>
<li>the generated image <strong>markup</strong> (e.g. <code>img</code> tags in the HTML document)</li>
<li>the <strong>delivery</strong> of the images</li>
</ol>
<h3 id="storage">Storage</h3>
<p>The storage of choice for Livingdocs is Amazon S3, the bucket is configured in the server like this:</p>
<pre><code class="lang-js"><span class="hljs-string">&apos;images&apos;</span>: {
  <span class="hljs-string">&apos;public&apos;</span>: <span class="hljs-string">&apos;http://bucket-name.s3.amazonaws.com&apos;</span>,
  <span class="hljs-string">&apos;bucket&apos;</span>: <span class="hljs-string">&apos;bucket-name&apos;</span>,
  <span class="hljs-string">&apos;bucket_region&apos;</span>: <span class="hljs-string">&apos;eu-west-1&apos;</span>
}
</code></pre>
<p>You can configure your own image storage using the following configuration:</p>
<pre><code class="lang-js"><span class="hljs-string">&apos;images&apos;</span>: {
  <span class="hljs-string">&apos;proxy&apos;</span>: {
    <span class="hljs-string">&apos;url&apos;</span>: <span class="hljs-string">&apos;http://your-image-storage.com&apos;</span>
  }
}
</code></pre>
<p>This will route image upload requests from Livingdocs to your chosen URL instead of S3.
For details please see the reference documentation for the <a href="../../reference-docs/server-configuration/config.html">server configuration</a></p>
<h3 id="delivery">Delivery</h3>
<p>The delivery of the images is done through a URL-pattern-based web service. Out of the box, Livingdocs supports:</p>
<ol>
<li>resrc.it (<a href="https://www.resrc.it/" target="_blank">https://www.resrc.it/</a> note: resrc.it was bought by fastly and you can currently not open new accounts)</li>
<li>ImgIX (<a href="https://www.imgix.com/" target="_blank">https://www.imgix.com/</a>)</li>
</ol>
<p>You can also add another image service, or even your own. SZ did so for their magazine.</p>
<h3 id="markup">Markup</h3>
<p>In order to see an image in a HTML document, Livingdocs needs to generate the HTML markup. This has to work in tandem with the chosen web service (ImgIX or resrc.it) since each of those services expects a specific URL pattern to encode things like the image width or a cropping. Currently, both ImgIX and resrc.it have their corresponding markup generator in the Livingdocs framework. As an outlook, we are pushing towards a more configurable Lego-like system where you don&apos;t configure a specific web service but rather specific strategies.</p>
<p>Below is an example workflow that summarizes the whole process.</p>
<p>A user uploads an image to the Livingdocs editor, the corresponding file is stored on Amazon S3 and the URL to the Amazon file is available on the component as <code>originalUrl</code>. The framework chooses the correct image service (e.g. ImgIX) for generating the correct HTML markup in the document that is shown in the Livingdocs editor. (The image service to be used is configured in the Livingdocs editor. Let&apos;s say <code>ImgIX</code> is configured.) The framework loads the <code>imgix_image_service</code> and calls the <code>set</code> method which will generate an <code>img</code> tag with a URL that fits the ImgIX url specification (<a href="https://docs.imgix.com/setup/serving-images" target="_blank">https://docs.imgix.com/setup/serving-images</a>). The browser then renders the image by querying ImgIX for the respective image.</p>
<h2 id="why-image-services">Why image services?</h2>
<p>You might wonder why Livingdocs uses an image service to start with and does not just write the Amazon URL into an <code>img</code> tag&apos;s <code>src</code> attribute. Two reasons mainly:</p>
<ol>
<li>cropping</li>
<li>different image widths (sizes) for different devices</li>
</ol>
<p>The first reason is easily explained. Livingdocs provides an image cropping tool (<a href="https://github.com/upfrontIO/srcissors" target="_blank">https://github.com/upfrontIO/srcissors</a>) in the Livingdocs editor that allows users to crop their images and change the aspect ratio. The Livingdocs server can not generate different versions of an image and deliver them. It gives this responsibility to a web service such as ImgIX. Currently, Livingdocs expects that a web service takes the cropping information in the form of a URL parameter (example of ImgIX: <a href="https://docs.imgix.com/apis/url/size/rect" target="_blank">https://docs.imgix.com/apis/url/size/rect</a>). This is the case for all services we know of.</p>
<p>The second reason for using an image service is a bit more involved. Put simply, you don&apos;t want to download a 5 Megapixel image on your mobile phone. Instead you want a website to be &quot;smart&quot; and download the image in such a size that the resolution is perfect for your device but the size is just as large as need be. There is actually a whole community for this topic: <a href="https://responsiveimages.org/" target="_blank">https://responsiveimages.org/</a>
Livingdocs support 2 strategies for responsive images:</p>
<ol>
<li>script-based plugin</li>
<li><code>srcset</code> images (inline images only)</li>
</ol>
<p>The first approach expects you to provide a client-side Javascript that runs in the reader&apos;s browser, detects the respective device size and requests the optimal image for this size. We provide such a script for rescr.it. For another image service you would need to provide your own script.
The second approach uses the browser&apos;s <code>srcset</code> markup. A good article on the topic is found here: <a href="https://ericportis.com/posts/2014/srcset-sizes/" target="_blank">https://ericportis.com/posts/2014/srcset-sizes/</a> The <code>srcset</code> attribute is today (2017) supported by all major browsers, including Mircosoft&apos;s edge. It is <em>not</em> supported in IE11 and below. Of course that does not mean that users can not see images on IE11 just that they are not responsive there.
Srcset only works for inline images (<code>img</code> tag). If you use a background image, you can currently set a max width. Read here on <a href="responsive-bg-images.md">why srcset does not work for background images</a>.</p>
<h2 id="configuring-an-image-service">Configuring an image service</h2>
<p>You currently need to configure your image service in both the editor and the server. We will push towards a server-only configuration, also because most of the configuration is duplicated, but we&apos;re not there yet. In the editor you configure which image service to use and the configuration for this image service. In the server you just add the configuration for the image service.</p>
<p>Below we&apos;ll outline the configuration for both ImgIX and resrc.it.</p>
<h3 id="imgix">ImgIX</h3>
<p>The ImgIX configuration uses <code>srcset</code>. If you don&apos;t know about this HTML standard yet, refer to this article first: <a href="https://ericportis.com/posts/2014/srcset-sizes/" target="_blank">https://ericportis.com/posts/2014/srcset-sizes/</a></p>
<h4 id="editor">Editor</h4>
<pre><code class="lang-js">  app: {
    imageService: <span class="hljs-string">&apos;imgix&apos;</span>,
    imageServiceConfig: {
      host: <span class="hljs-string">&quot;https://livingdocs-dev.imgix.net&quot;</span>,
      preferWebp: <span class="hljs-literal">true</span>,
      backgroundImage: {
        maxWidth: <span class="hljs-number">2048</span>
      },
      srcSet: {
        defaultWidth: <span class="hljs-number">1024</span>,
        widths: [
          <span class="hljs-number">2048</span>,
          <span class="hljs-number">1024</span>,
          <span class="hljs-number">620</span>,
          <span class="hljs-number">320</span>
        ],
        sizes: [<span class="hljs-string">&apos;100vw&apos;</span>]
      }
    }
  }
</code></pre>
<p>The <code>imageService</code> field tells Livingdocs which image service should be used. The <code>imageServiceConfig</code> contains the configuration for this specific image service.
The <code>host</code> is simply where your ImgIX images are served from.
If <code>preferWebp</code> is set to <code>true</code> Livingdocs will pass the <code>auto=format</code> parameter (<a href="https://docs.imgix.com/apis/url/auto" target="_blank">https://docs.imgix.com/apis/url/auto</a>).
<code>srcSet</code> defines the settings you want for your <code>srcset</code> attribute:</p>
<ol>
<li>the available image widths <code>widths</code></li>
<li>the width that is set to the <code>src</code> attribute (e.g. for IE11 and below), defined in <code>defaultWidth</code></li>
<li>The <code>sizes</code> attribute that defines the responsive behavior</li>
</ol>
<p>Note: We will take (3) out of the configuration in the medium term since we think it makes more sense to set the <code>sizes</code> attribute directly on the component or template.</p>
<p>For background images you can simply set a fixed max-width, so that each background image will get the corresponding ImgIX width set. (if the actual width of the image is lower, ImgIX will never try to interpolate but just leave it -&gt; this is why it is called max-width).</p>
<h4 id="server">Server</h4>
<pre><code class="lang-js">documents: {
  imageServices: {
    imgix: {
      host: <span class="hljs-string">&apos;https://livingdocs-dev.imgix.net&apos;</span>,
      preferWebp: <span class="hljs-literal">true</span>,
      backgroundImage: {
        maxWidth: <span class="hljs-number">2048</span>
      }
      srcSet: {
        defaultWidth: <span class="hljs-number">1024</span>,
        widths: [
          <span class="hljs-number">2048</span>,
          <span class="hljs-number">1024</span>,
          <span class="hljs-number">620</span>,
          <span class="hljs-number">320</span>
        ],
        sizes: [<span class="hljs-string">&apos;100vw&apos;</span>]
      }
    }
  }
}
</code></pre>
<p>The parameters are equivalent to the ones in the editor. You can in theory also configure several images services in the server, but as of now only one can be used (the one specified in the editor config).</p>
<h3 id="resrcit">Resrc.it</h3>
<h4 id="editor">Editor</h4>
<pre><code class="lang-js">app: {
  imageService: <span class="hljs-string">&apos;resrc.it&apos;</span>,
  imageServiceConfig: {
    host: <span class="hljs-string">&apos;https://app.resrc.it&apos;</span>,
    quality: <span class="hljs-number">75</span>,
    scriptUrl: <span class="hljs-string">&apos;//d2o08py1e264ss.cloudfront.net/assets/resrc-0.9.0.min.js&apos;</span>
  }
}
</code></pre>
<p>The <code>imageService</code> field tells Livingdocs which image service should be used. The <code>imageServiceConfig</code> contains the configuration for this specific image service.
The <code>host</code> is simply where your resrc.it images are served from. With <code>resrc.it</code> this is normally always the same.
The <code>quality</code> setting allows you to choose a global quality for your images. In the range between 75 to 100 you normally don&apos;t see a difference.
The <code>scriptUrl</code> points to the client-side Javascript code used for the responsive behavior. You need to provide this. And don&apos;t rely on our URL ;)</p>
<h4 id="server">Server</h4>
<pre><code class="lang-js">documents: {
  imageServices: {
    <span class="hljs-string">&apos;resrc.it&apos;</span>: {
      host: <span class="hljs-string">&apos;https://app.resrc.it&apos;</span>,
      quality: <span class="hljs-number">75</span>,
      scriptUrl: <span class="hljs-string">&apos;//d2o08py1e264ss.cloudfront.net/assets/resrc-0.9.0.min.js&apos;</span>
    }
  }
}
</code></pre>
<p>The parameters are equivalent to the ones in the editor. You can in theory also configure several images services in the server, but as of now only one can be used (the one specified in the editor config).</p>
<h2 id="srcset-in-metadata"><code>srcset</code> in Metadata</h2>
<p>This section is only relevant if you are using ImgIX. Skip it otherwise.</p>
<p>Metadata fields of type image will contain the <code>srcset</code> in a specific <code>crop</code>, but not in the root. The reason for this is simply that you normally only want teaser images in a certain crop and in the metadata definition it is not even possible to have a metadata image without a crop definition.</p>
<p>An example:</p>
<pre><code class="lang-json"><span class="hljs-string">&quot;metadata&quot;</span>: {
  <span class="hljs-string">&quot;teaserImage&quot;</span>: {
    <span class="hljs-string">&quot;originalUrl&quot;</span>: <span class="hljs-string">&quot;http://livingdocs-images-dev.s3.amazonaws.com/2017/3/29/56cac115-07ef-4421-9fbf-4c886d4543cd.jpeg&quot;</span>,
    <span class="hljs-string">&quot;url&quot;</span>: <span class="hljs-string">&quot;https://livingdocs-dev.imgix.net/2017/3/29/56cac115-07ef-4421-9fbf-4c886d4543cd.jpeg?w=1024&amp;auto=format&quot;</span>,
    <span class="hljs-string">&quot;width&quot;</span>: <span class="hljs-number">1760</span>,
    <span class="hljs-string">&quot;height&quot;</span>: <span class="hljs-number">791</span>,
    <span class="hljs-string">&quot;imageService&quot;</span>: <span class="hljs-string">&quot;imgix&quot;</span>,
    <span class="hljs-string">&quot;crops&quot;</span>: [
        {
            <span class="hljs-string">&quot;url&quot;</span>: <span class="hljs-string">&quot;https://livingdocs-dev.imgix.net/2017/3/29/56cac115-07ef-4421-9fbf-4c886d4543cd.jpeg?rect=177%2C0%2C1406%2C791&amp;w=1024&amp;auto=format&quot;</span>,
            <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;16:9&quot;</span>,
            <span class="hljs-string">&quot;x&quot;</span>: <span class="hljs-number">177</span>,
            <span class="hljs-string">&quot;y&quot;</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">&quot;width&quot;</span>: <span class="hljs-number">1406</span>,
            <span class="hljs-string">&quot;height&quot;</span>: <span class="hljs-number">791</span>,
            <span class="hljs-string">&quot;srcSet&quot;</span>: [
                {
                    <span class="hljs-string">&quot;url&quot;</span>: <span class="hljs-string">&quot;https://livingdocs-dev.imgix.net/2017/3/29/56cac115-07ef-4421-9fbf-4c886d4543cd.jpeg?rect=177%2C0%2C1406%2C791&amp;w=2048&amp;auto=format&quot;</span>,
                    <span class="hljs-string">&quot;width&quot;</span>: <span class="hljs-number">2048</span>
                },
                {
                    <span class="hljs-string">&quot;url&quot;</span>: <span class="hljs-string">&quot;https://livingdocs-dev.imgix.net/2017/3/29/56cac115-07ef-4421-9fbf-4c886d4543cd.jpeg?rect=177%2C0%2C1406%2C791&amp;w=1024&amp;auto=format&quot;</span>,
                    <span class="hljs-string">&quot;width&quot;</span>: <span class="hljs-number">1024</span>
                },
                {
                    <span class="hljs-string">&quot;url&quot;</span>: <span class="hljs-string">&quot;https://livingdocs-dev.imgix.net/2017/3/29/56cac115-07ef-4421-9fbf-4c886d4543cd.jpeg?rect=177%2C0%2C1406%2C791&amp;w=620&amp;auto=format&quot;</span>,
                    <span class="hljs-string">&quot;width&quot;</span>: <span class="hljs-number">620</span>
                },
                {
                    <span class="hljs-string">&quot;url&quot;</span>: <span class="hljs-string">&quot;https://livingdocs-dev.imgix.net/2017/3/29/56cac115-07ef-4421-9fbf-4c886d4543cd.jpeg?rect=177%2C0%2C1406%2C791&amp;w=320&amp;auto=format&quot;</span>,
                    <span class="hljs-string">&quot;width&quot;</span>: <span class="hljs-number">320</span>
                }
            ]
        }
    ]
  }
}
</code></pre>
<p>The <code>srcset</code> information is useful when you want to have responsive images in your overview pages or embeds (<code>doc-include</code> directives). In such a case you will render the <code>doc-include</code> HTML in a server-side plugin (template). This plugin will not use the Livingdocs framework to render thus your configured <code>srcset</code> will not be automatically applied. You can though use the information on the metadata field to apply it manually in the template.</p>
<p>An example template:</p>
<pre><code class="lang-html">module.exports = `
<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&lt;%= article.url %&gt;&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;teaser__img-wrap&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;teaser__img&quot;</span>
        <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;&lt;%= article.teaserImage %&gt;&quot;</span>
        <span class="hljs-attr">srcset</span>=<span class="hljs-string">&quot;&lt;%= article.srcSet %&gt;&quot;</span>
        <span class="hljs-attr">sizes</span>=<span class="hljs-string">&quot;(min-width: 1024px) 100vw, 50vw&quot;</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
</code></pre>
<p>You apply the <code>srcset</code> attribute manually in your <code>doc-include</code> template.
Note also that we prefer here to write the <code>sizes</code> attribute directly in the template. This makes sense since the template knows best how the responsive behavior should be (better than a config).</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../../reference-docs/editor-styleguide/styleguide.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Styleguide">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Image Services","level":"6.1.2","depth":2,"next":{"title":"Server","level":"6.2","depth":1,"ref":"","articles":[{"title":"Editing API","level":"6.2.1","depth":2,"path":"reference-docs/server-editing-api/README.md","ref":"reference-docs/server-editing-api/README.md","articles":[{"title":"Basics","level":"6.2.1.1","depth":3,"path":"reference-docs/server-editing-api/api_basics.md","ref":"reference-docs/server-editing-api/api_basics.md","articles":[]},{"title":"CORS","level":"6.2.1.2","depth":3,"path":"reference-docs/server-editing-api/api_cors.md","ref":"reference-docs/server-editing-api/api_cors.md","articles":[]},{"title":"Error","level":"6.2.1.3","depth":3,"path":"reference-docs/server-editing-api/api_errors.md","ref":"reference-docs/server-editing-api/api_errors.md","articles":[]},{"title":"Authentication","level":"6.2.1.4","depth":3,"path":"reference-docs/server-editing-api/editing_api_authentication.md","ref":"reference-docs/server-editing-api/editing_api_authentication.md","articles":[]},{"title":"Design","level":"6.2.1.5","depth":3,"path":"reference-docs/server-editing-api/editing_api_design.md","ref":"reference-docs/server-editing-api/editing_api_design.md","articles":[]},{"title":"Lists","level":"6.2.1.6","depth":3,"path":"reference-docs/server-editing-api/editing_api_list.md","ref":"reference-docs/server-editing-api/editing_api_list.md","articles":[]},{"title":"Documents","level":"6.2.1.7","depth":3,"path":"reference-docs/server-editing-api/editing_api_documents.md","ref":"reference-docs/server-editing-api/editing_api_documents.md","articles":[]},{"title":"Revisions","level":"6.2.1.8","depth":3,"path":"reference-docs/server-editing-api/editing_api_revisions.md","ref":"reference-docs/server-editing-api/editing_api_revisions.md","articles":[]},{"title":"Publications","level":"6.2.1.9","depth":3,"path":"reference-docs/server-editing-api/editing_api_publications.md","ref":"reference-docs/server-editing-api/editing_api_publications.md","articles":[]},{"title":"Users","level":"6.2.1.10","depth":3,"path":"reference-docs/server-editing-api/editing_api_users.md","ref":"reference-docs/server-editing-api/editing_api_users.md","articles":[]},{"title":"Projects","level":"6.2.1.11","depth":3,"path":"reference-docs/server-editing-api/editing_api_spaces.md","ref":"reference-docs/server-editing-api/editing_api_spaces.md","articles":[]},{"title":"Hooks","level":"6.2.1.12","depth":3,"path":"reference-docs/server-editing-api/editing_api_hooks.md","ref":"reference-docs/server-editing-api/editing_api_hooks.md","articles":[]}]}]},"previous":{"title":"Styleguide","level":"6.1.1","depth":2,"path":"reference-docs/editor-styleguide/styleguide.md","ref":"reference-docs/editor-styleguide/styleguide.md","articles":[]},"dir":"ltr"},"config":{"plugins":["livereload"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"Livingdocs","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Livingdocs Technical Documentation","gitbook":"*","description":"Technical documentation of the Livingdocs CMS. Covers documentation for designers, integrators and core developers"},"file":{"path":"concepts/images/image-services.md","mtime":"2017-08-14T13:11:48.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2017-08-15T12:39:59.671Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

