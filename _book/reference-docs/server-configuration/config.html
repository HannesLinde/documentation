
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Configure the server Â· Livingdocs Technical Documentation</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Livingdocs">
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="channel-config.html" />
    
    
    <link rel="prev" href="../server-extensions/events.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../getting_started.html">
            
                <a href="../../getting_started.html">
            
                    
                    Getting started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../walkthroughs/getting-started-with-local-development.html">
            
                <a href="../../walkthroughs/getting-started-with-local-development.html">
            
                    
                    Setting up Livingdocs locally
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../GLOSSARY.html">
            
                <a href="../../GLOSSARY.html">
            
                    
                    Glossary
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Livingdocs Design</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../common-designs/create_designs.html">
            
                <a href="../common-designs/create_designs.html">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../common-designs/component_config.html">
            
                <a href="../common-designs/component_config.html">
            
                    
                    Livingdocs components
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../common-designs/design_config.html">
            
                <a href="../common-designs/design_config.html">
            
                    
                    Design configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../common-designs/list_example.html">
            
                <a href="../common-designs/list_example.html">
            
                    
                    Bullet List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../../concepts/document-migrations/migrations.html">
            
                <a href="../../concepts/document-migrations/migrations.html">
            
                    
                    Design migrations
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Livingdocs Customizations</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../../walkthroughs/add_customizations.html">
            
                <a href="../../walkthroughs/add_customizations.html">
            
                    
                    Register customizations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" >
            
                <span>
            
                    
                    Editor
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.1" data-path="../editor-configuration/metadata.html">
            
                <a href="../editor-configuration/metadata.html">
            
                    
                    Metadata
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.2" data-path="../editor-configuration/search-filters.html">
            
                <a href="../editor-configuration/search-filters.html">
            
                    
                    Dashboard search filters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.3" data-path="../editor-configuration/text-editing.html">
            
                <a href="../editor-configuration/text-editing.html">
            
                    
                    Cofigure text editing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.4" data-path="../editor-configuration/image-cropping.html">
            
                <a href="../editor-configuration/image-cropping.html">
            
                    
                    Configure image cropping
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.5" data-path="../editor-configuration/editing-features.html">
            
                <a href="../editor-configuration/editing-features.html">
            
                    
                    Configure editing features
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.3" >
            
                <span>
            
                    
                    Server
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.3.1" data-path="metadata.html">
            
                <a href="metadata.html">
            
                    
                    Metadata
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.2" data-path="../server-extensions/add-custom-include.html">
            
                <a href="../server-extensions/add-custom-include.html">
            
                    
                    Adding Includes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.3" data-path="../server-extensions/events.html">
            
                <a href="../server-extensions/events.html">
            
                    
                    Available Events
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="3.3.4" data-path="config.html">
            
                <a href="config.html">
            
                    
                    Configure the server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.5" data-path="channel-config.html">
            
                <a href="channel-config.html">
            
                    
                    Configure channels
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.6" data-path="../server-extensions/publish-hooks.html">
            
                <a href="../server-extensions/publish-hooks.html">
            
                    
                    Publish and Unpublish Hooks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.7" data-path="../server-public-api/routing-system.html">
            
                <a href="../server-public-api/routing-system.html">
            
                    
                    Routing system
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../../concepts/metadata/metadata-examples.html">
            
                <a href="../../concepts/metadata/metadata-examples.html">
            
                    
                    Metadata Example (editor and server)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="../server-print-api/print-api.html">
            
                <a href="../server-print-api/print-api.html">
            
                    
                    Print API
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Devops</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../../setup-and-deployment/self-hosting.html">
            
                <a href="../../setup-and-deployment/self-hosting.html">
            
                    
                    Hosting Livingdocs
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="../../setup-and-deployment/hardware-requirements.html">
            
                <a href="../../setup-and-deployment/hardware-requirements.html">
            
                    
                    Hardware Requirements
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="../../setup-and-deployment/high-availability/">
            
                <a href="../../setup-and-deployment/high-availability/">
            
                    
                    Architecture
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.2.1" data-path="../../setup-and-deployment/high-availability/high-availability-setup.html">
            
                <a href="../../setup-and-deployment/high-availability/high-availability-setup.html">
            
                    
                    high-availability
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="../../setup-and-deployment/docker/">
            
                <a href="../../setup-and-deployment/docker/">
            
                    
                    Docker
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.3.1" data-path="../../setup-and-deployment/docker/build-docker-images.html">
            
                <a href="../../setup-and-deployment/docker/build-docker-images.html">
            
                    
                    Build docker images
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.1.4" data-path="../../setup-and-deployment/external-services.html">
            
                <a href="../../setup-and-deployment/external-services.html">
            
                    
                    External services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.5" data-path="../../setup-and-deployment/proxy.html">
            
                <a href="../../setup-and-deployment/proxy.html">
            
                    
                    Proxy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.6" data-path="../../setup-and-deployment/npm/access-private-npm-modules.html">
            
                <a href="../../setup-and-deployment/npm/access-private-npm-modules.html">
            
                    
                    NPM Tokens
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="design-servers.html">
            
                <a href="design-servers.html">
            
                    
                    Design Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../maintenance/how-to-do-a-load-test.html">
            
                <a href="../maintenance/how-to-do-a-load-test.html">
            
                    
                    Load Testing
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Administration</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../../walkthroughs/create-users.html">
            
                <a href="../../walkthroughs/create-users.html">
            
                    
                    Create Users
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="logging.html">
            
                <a href="logging.html">
            
                    
                    Logs
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Livingdocs core development</li>
        
        
    
        <li class="chapter " data-level="6.1" >
            
                <span>
            
                    
                    Editor
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.1" data-path="../editor-styleguide/styleguide.html">
            
                <a href="../editor-styleguide/styleguide.html">
            
                    
                    Styleguide
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.2" >
            
                <span>
            
                    
                    Server
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.2.1" data-path="../server-editing-api/">
            
                <a href="../server-editing-api/">
            
                    
                    Editing API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.2.1.1" data-path="../server-editing-api/api_basics.html">
            
                <a href="../server-editing-api/api_basics.html">
            
                    
                    Basics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.1.2" data-path="../server-editing-api/api_cors.html">
            
                <a href="../server-editing-api/api_cors.html">
            
                    
                    CORS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.1.3" data-path="../server-editing-api/api_errors.html">
            
                <a href="../server-editing-api/api_errors.html">
            
                    
                    Error
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.1.4" data-path="../server-editing-api/editing_api_authentication.html">
            
                <a href="../server-editing-api/editing_api_authentication.html">
            
                    
                    Authentication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.1.5" data-path="../server-editing-api/editing_api_design.html">
            
                <a href="../server-editing-api/editing_api_design.html">
            
                    
                    Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.1.6" data-path="../server-editing-api/editing_api_list.md">
            
                <span>
            
                    
                    Lists
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.1.7" data-path="../server-editing-api/editing_api_documents.html">
            
                <a href="../server-editing-api/editing_api_documents.html">
            
                    
                    Documents
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.1.8" data-path="../server-editing-api/editing_api_revisions.html">
            
                <a href="../server-editing-api/editing_api_revisions.html">
            
                    
                    Revisions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.1.9" data-path="../server-editing-api/editing_api_publications.html">
            
                <a href="../server-editing-api/editing_api_publications.html">
            
                    
                    Publications
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.1.10" data-path="../server-editing-api/editing_api_users.html">
            
                <a href="../server-editing-api/editing_api_users.html">
            
                    
                    Users
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.1.11" data-path="../server-editing-api/editing_api_spaces.html">
            
                <a href="../server-editing-api/editing_api_spaces.html">
            
                    
                    Projects
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2.1.12" data-path="../server-editing-api/editing_api_hooks.html">
            
                <a href="../server-editing-api/editing_api_hooks.html">
            
                    
                    Hooks
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="../maintenance/release-management/">
            
                <a href="../maintenance/release-management/">
            
                    
                    Releases
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.3.1" data-path="../maintenance/release-management/deployment-pipeline.html">
            
                <a href="../maintenance/release-management/deployment-pipeline.html">
            
                    
                    Deployment
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation" style="background-color: #3a2f3c; height: 50px; position: fixed; width: 83%">
    <a href="https://www.livingdocs.io"><img src="https://livingdocs.io/assets/images/livingdocs-logo-inverted.svg" style="width: 200px; padding: 15px 40px" /></a>
    

    <!-- Title -->
    <h1 style="position: absolute; top: 0; left: 30%; color: white">
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Configure the server</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="livingdocs-server-configuration">Livingdocs Server Configuration</h1>
<h2 id="services">Services</h2>
<h4 id="server">Server</h4>
<pre><code class="lang-js">server: {
  port: <span class="hljs-number">9090</span>,
  max_json_request_size: <span class="hljs-string">&apos;100kb&apos;</span>  
}
</code></pre>
<h4 id="editor">Editor</h4>
<pre><code class="lang-js">editor: {
  <span class="hljs-comment">// configure the Editor Host. This is used for password reset &amp; login urls.</span>
  public_host: <span class="hljs-string">&apos;http://localhost:9000&apos;</span>
}
</code></pre>
<h4 id="postgres">Postgres</h4>
<pre><code class="lang-js">db: {
  host: <span class="hljs-string">&apos;localhost&apos;</span>,
  port: <span class="hljs-string">&apos;5432&apos;</span>,
  user: <span class="hljs-string">&apos;postgres&apos;</span>,
  database: <span class="hljs-string">&apos;li_local&apos;</span>,
  pool_min: <span class="hljs-number">1</span>,
  pool_max: <span class="hljs-number">5</span>,
  ssl: <span class="hljs-literal">false</span>
}
</code></pre>
<h4 id="amazon-s3">Amazon S3</h4>
<pre><code class="lang-js">aws: {
  force_local_storage: <span class="hljs-literal">false</span> <span class="hljs-comment">// defaults to `false`</span>
  secret_key: <span class="hljs-string">&apos;yourSecretKey&apos;</span>
  access_key: <span class="hljs-string">&apos;yourAccessKey&apos;</span>
}
</code></pre>
<h4 id="pusher">Pusher</h4>
<p>Disabled by Default. Enable to show who is viewing a document in real time
and allow for basic collaboration features in the editor.</p>
<pre><code class="lang-js">pusher: {
  enabled: <span class="hljs-literal">false</span>,
  app_id: <span class="hljs-string">&apos;108378&apos;</span>,
  key: <span class="hljs-string">&apos;dda3c0ca58ed2f649ea8&apos;</span>,
  secret: <span class="hljs-string">&apos;*****&apos;</span>  
}
</code></pre>
<h4 id="logging">Logging</h4>
<pre><code class="lang-js">logs: {
  enabled: <span class="hljs-literal">true</span>,

  <span class="hljs-comment">// possible log levels: &apos;error&apos;, &apos;warn&apos;, &apos;info&apos;, &apos;debug&apos;, &apos;trace&apos;</span>
  level: <span class="hljs-string">&apos;warn&apos;</span>,

  <span class="hljs-comment">// use `true` for development to have a formatted output</span>
  pretty: <span class="hljs-literal">false</span>,

  <span class="hljs-comment">// enable request logs</span>
  logRequests: <span class="hljs-literal">true</span>
}
</code></pre>
<p><a href="logging.html">More info about logging</a></p>
<h4 id="docker">Docker</h4>
<p>This tells the database scripts which recreates the database that docker is used.
This does not work for docker-compose. And the docker container where postgres runs
must be named <code>postgres</code>.</p>
<p>If <code>docker.enabled</code> is set to <code>false</code> then <code>createdb</code> and <code>dropdb</code> must be installed
on the system.</p>
<pre><code class="lang-js">docker:
  enabled: <span class="hljs-literal">true</span>
</code></pre>
<h2 id="features">Features</h2>
<h4 id="authentication">Authentication</h4>
<p>Configure the authentication feature.</p>
<p><em>Important</em> Replace <code>access_token_secret</code> and <code>connections.local.config.secret</code>
with a randomly generated string for every environment you use.
Changing the <code>access_token_secret</code> will render all access tokens in the
database useless.</p>
<h5 id="connectionslocal"><code>connections.local</code></h5>
<p>Represents the default email/password authentication strategy.</p>
<ul>
<li><code>default_login_domain</code> Allows to omit the email suffix
(e.g &apos;@gmail.com&apos;) during login</li>
<li><code>denied_passwords</code> Array of regexes that are used in the strong passwords
feature. If the regex matches the password cannot be used.</li>
</ul>
<pre><code class="lang-js">auth: {
  realm: <span class="hljs-string">&apos;livingdocs&apos;</span>,
  access_token_secret: <span class="hljs-string">&apos;GpA^xLH5$qLzWcqEvZmE3imYwVf68kXa1JR5rP*NFRUyRPQRtbVwWk3bHusD&apos;</span>,
  access_token_ttl: <span class="hljs-number">12</span> * <span class="hljs-number">3600</span> * <span class="hljs-number">1000</span>, <span class="hljs-comment">// 12 h</span>
  authorization_code_ttl: <span class="hljs-number">3600</span> * <span class="hljs-number">1000</span> / <span class="hljs-number">4</span>, <span class="hljs-comment">// 15min</span>
  password_reset_ttl: <span class="hljs-number">6</span> * <span class="hljs-number">3600</span> * <span class="hljs-number">1000</span>, <span class="hljs-comment">// 6h</span>
  account_confirmation_ttl: <span class="hljs-number">72</span> * <span class="hljs-number">3600</span> * <span class="hljs-number">1000</span>, <span class="hljs-comment">// 3d</span>
  connections: {
    local: {
      label: <span class="hljs-string">&apos;Password&apos;</span>,
      enabled: <span class="hljs-literal">true</span>,
      strategy: <span class="hljs-string">&apos;li-authentication-local&apos;</span>,
      config: {
        default_login_domain: <span class="hljs-string">&apos;upfront.io&apos;</span>,
        secret: <span class="hljs-string">&apos;8wP0oTmQFX4^f@FCW*MiQ%qkDu*m6B!NBElVg%hVmMHNdr2F@F9J4yf$ykN5&apos;</span>,
        bcrypt_iterations: <span class="hljs-number">10</span>,
        password_reset_url: <span class="hljs-string">&apos;/reset#code={{code}}&apos;</span>,
        denied_passwords: [
          <span class="hljs-string">&apos;upfront&apos;</span>,
          <span class="hljs-string">&apos;livingd[o0][cg]s&apos;</span>,
          <span class="hljs-string">&apos;lukas&apos;</span>,
          <span class="hljs-string">&apos;nzz&apos;</span>,
          <span class="hljs-string">&apos;@[a-z]{2,6}\\.[chomteinf]{2,4}(.au)?$&apos;</span> <span class="hljs-comment">// Email blacklisting</span>
        ]
      }
    }
  }
}
</code></pre>
<h4 id="user-management-emails">User Management Emails</h4>
<pre><code class="lang-js">emails: {
  transports: {
    awsEmailSender: {
      <span class="hljs-keyword">from</span>: <span class="hljs-string">&apos;Livingdocs &lt;noreply@livingdocs.io&gt;&apos;</span>,
      <span class="hljs-built_in">module</span>: <span class="hljs-string">&apos;nodemailer-ses-transport&apos;</span>,
      config: {
        accessKeyId: <span class="hljs-string">&apos;yourAccessKeyId&apos;</span>,
        secretAccessKey: <span class="hljs-string">&apos;yourSecretAccessKey&apos;</span>,
        region: <span class="hljs-string">&apos;eu-west-1&apos;</span>
      }
    }
  },
  templates: {
    userCreated: {
      transport: <span class="hljs-string">&apos;default&apos;</span>,
      subject: <span class="hljs-string">&apos;Welcome at Livingdocs&apos;</span>,
      htmlTemplatePath: <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">&apos;../../plugins/email-templates/user_created.html&apos;</span>),
      attachments: [
        cid: <span class="hljs-string">&apos;logo&apos;</span>
        filename: <span class="hljs-string">&apos;logo.png&apos;</span>
        path: <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">&apos;../../plugins/email-templates/logo.png&apos;</span>)
      ]
    },
    passwordReset: {
      transport: <span class="hljs-string">&apos;awsEmailSender&apos;</span>,
      subject: <span class="hljs-string">&apos;Password reset&apos;</span>,
      htmlTemplatePath: <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">&apos;../../plugins/email-templates/password_reset.html&apos;</span>),

      <span class="hljs-comment">// # or</span>
      <span class="hljs-comment">// textTemplate: &apos;Reset password for &lt;%= user.name %&gt;&apos;</span>
      <span class="hljs-comment">// htmlTemplate: &apos;Reset password for &lt;%= user.name %&gt;&apos;</span>

      attachments: [
        cid: <span class="hljs-string">&apos;logo&apos;</span>
        filename: <span class="hljs-string">&apos;logo.png&apos;</span>
        path: <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">&apos;../../plugins/email-templates/logo.png&apos;</span>)
      ]
    }
  }
}
</code></pre>
<h4 id="designs">Designs</h4>
<p>Configure the Livingdocs <a href="../../GLOSSARY.html#design" class="glossary-term" title="A list of Components and configurations how they can be used
in a Livingdoc and how users can interact with these Components in the
Livingdocs Editor.">Design</a> Server.</p>
<ul>
<li><code>design_repository</code> is used to define from where designs are loaded.</li>
<li><code>public</code>, <code>bucket</code> and <code>bucket_region</code> are only used if designs are
uploaded through this server. (The <code>bucket_region</code> must support
Amazon Signature Version 2)</li>
</ul>
<pre><code class="lang-js">designs: {
  design_repository: <span class="hljs-string">&apos;https://api.livingdocs.io&apos;</span>,
  public: <span class="hljs-string">&apos;http://livingdocs-designs-dev.s3.amazonaws.com&apos;</span>,
  bucket: <span class="hljs-string">&apos;livingdocs-designs-dev&apos;</span>,
  bucket_region: <span class="hljs-string">&apos;eu-west-1&apos;</span>  
}
</code></pre>
<h4 id="images">Images</h4>
<ul>
<li>Standard Option</li>
</ul>
<p>Define the Amazon S3 image upload target plus processing options that are
applied before the image is uploaded. (The <code>bucket_region</code> must support
Amazon Signature Version 2)</p>
<pre><code class="lang-js">images: {
  public: <span class="hljs-string">&apos;http://livingdocs-images-dev.s3.amazonaws.com&apos;</span>,
  bucket: <span class="hljs-string">&apos;livingdocs-images-dev&apos;</span>,
  bucket_region: <span class="hljs-string">&apos;us-west-1&apos;</span>,
  upload: {
    max_file_size: <span class="hljs-number">100</span> * <span class="hljs-number">1000</span> * <span class="hljs-number">1000</span>, <span class="hljs-comment">// 100MB, defaults to 5MB.</span>
    max_resolution: <span class="hljs-number">15</span> * <span class="hljs-number">1000</span> * <span class="hljs-number">1000</span> <span class="hljs-comment">// 15 mega-pixels</span>
  },
  processing: {
    <span class="hljs-comment">// Default values that approximate 4MB</span>
    max_file_size: <span class="hljs-number">4</span> * <span class="hljs-number">1000</span> * <span class="hljs-number">1000</span>,
    max_concurrent_processes: <span class="hljs-number">1</span>,
    lossy: {
      max_dimension: <span class="hljs-number">4000</span>,
      quality: <span class="hljs-number">80</span>
    }
    lossless: {
      max_dimension: <span class="hljs-number">1500</span>
    }
  }
}
</code></pre>
<ul>
<li>Proxy Option</li>
</ul>
<p>Alternatively you can forward image upload to another service.
For more info about this see <a href="../concepts/images/image-services.md">concepts/images</a>.</p>
<pre><code class="lang-js">images: {
  proxy: {
    url: <span class="hljs-string">&apos;https://foobar.com/images/upload&apos;</span>
  },
  upload_restrictions: {
    max_file_size: <span class="hljs-number">100</span>*<span class="hljs-number">1000</span>*<span class="hljs-number">1000</span> <span class="hljs-comment">// 100MB, defaults to 5MB.</span>
  }
}
</code></pre>
<h4 id="files">Files</h4>
<pre><code class="lang-js">files: {
  public: <span class="hljs-string">&apos;http://livingdocs-images-dev.s3.amazonaws.com&apos;</span>,
  bucket: <span class="hljs-string">&apos;livingdocs-images-dev&apos;</span>,
  bucket_region: <span class="hljs-string">&apos;us-west-1&apos;</span>,
  uploadRestrictions: {
    allowedMimeTypes: [<span class="hljs-string">&apos;application/pdf&apos;</span>],
    maxFileSize: <span class="hljs-number">100</span> * <span class="hljs-number">1000</span> * <span class="hljs-number">1000</span>  <span class="hljs-comment">// 100MB</span>
  }
}
</code></pre>
<p>The files feature is optional and can be disabled.</p>
<pre><code class="lang-js">files: {
  enabled: <span class="hljs-literal">false</span>
}
</code></pre>
<h4 id="documents">Documents</h4>
<pre><code class="lang-js">documents: {
  projects: {
    <span class="hljs-keyword">default</span>: {
      channels: {
        <span class="hljs-string">&apos;web&apos;</span>: {
          articles: [channel config],
          pages: [channel config]
        }
      }
    }
  },
  genericTransformations: [
    name: <span class="hljs-string">&apos;timeline&apos;</span>
    conversion: <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">&apos;../document-transformations/timeline-conversion&apos;</span>)
  ]
}
</code></pre>
<p>The <a href="../../GLOSSARY.html#channel" class="glossary-term" title="Represents a collection of documents. All documents in a channel must use
the same design. A channel also defines the Renditions.">channel</a> config is described here: <a href="channel-config.html">channel config</a></p>
<h4 id="render-pipeline">Render Pipeline</h4>
<p>Configure the worker configuration that is used to render <a href="../../GLOSSARY.html#livingdoc" class="glossary-term" title="A representation of content. It separates content from structure by using
Components. A Livingdoc references a specific Design wich defines the
available Components that can be used in the document.">Livingdoc</a> Documents.</p>
<pre><code class="lang-js">render_pipeline: {
  worker_strategy: <span class="hljs-string">&apos;worker-nodes&apos;</span>,
  max_concurrent_workers: <span class="hljs-built_in">Math</span>.max(<span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;os&apos;</span>).cpus().length - <span class="hljs-number">1</span>, <span class="hljs-number">1</span>),
  executions_per_worker: <span class="hljs-number">300</span>, <span class="hljs-comment">// number of render jobs before workers are restarted</span>
  execution_timeout: <span class="hljs-number">1000</span> * <span class="hljs-number">20</span> <span class="hljs-comment">// timeout in milliseconds</span>
}
</code></pre>
<h4 id="routing">Routing</h4>
<pre><code class="lang-js">routing: {
  enabled: <span class="hljs-literal">false</span>,
  indexing: { <span class="hljs-comment">// (optional)</span>
    <span class="hljs-comment">// number of publication events to process in each batch</span>
    batch_size: <span class="hljs-number">50000</span>, <span class="hljs-comment">// (default: 50000)</span>
    <span class="hljs-comment">// routes cache update interval</span>
    watch_interval: <span class="hljs-number">1000</span> <span class="hljs-comment">// (default: 1000)</span>
  },
  db: <span class="hljs-string">&apos;leveldown&apos;</span> <span class="hljs-comment">// (default: leveldown) to use leveldb, npm i leveldown and set &apos;leveldown&apos; here</span>
  <span class="hljs-comment">// db_options: # (optional) cf. https://github.com/Level/levelup#options</span>
}
</code></pre>
<h4 id="search">Search</h4>
<p>Configure the elasticsearch instance used by the search feature.</p>
<pre><code class="lang-js">search: {
  host: <span class="hljs-string">&apos;http://localhost:9200&apos;</span>,
  article_document_index: <span class="hljs-string">&apos;li_local_documents&apos;</span>,
  number_of_replicas: <span class="hljs-number">1</span>,
  log: <span class="hljs-literal">null</span>, <span class="hljs-comment">// use &apos;trace&apos; to debug the search feature (warning: very verbose)</span>

  <span class="hljs-comment">// The metadata mapping determines which metadata fields will be indexed</span>
  <span class="hljs-comment">// in elasticsearch. This can then be used to e.g. create search filters</span>
  <span class="hljs-comment">// based on metadata.</span>
  metadata_mapping: <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">&apos;../some/path/metadata/es_metadata_mapping&apos;</span>),

  <span class="hljs-comment">// Metadata fields that will be forwarded to the livigndocs-editor when</span>
  <span class="hljs-comment">// a document search is performed. This forwarding is needed to e.g show</span>
  <span class="hljs-comment">// the open tasks in the dashboard article list.</span>
  documentsMetadataFields: [
    <span class="hljs-string">&apos;tasks.*&apos;</span>,
    <span class="hljs-string">&apos;pushNotifications.*&apos;</span>
  ]
}
</code></pre>
<h4 id="push-notifications">Push Notifications</h4>
<pre><code class="lang-js">push_notifications: {
  firebase: {
    serverKey: <span class="hljs-string">&apos;*****&apos;</span>,

    <span class="hljs-comment">// Params sent with each message.</span>
    <span class="hljs-comment">//</span>
    <span class="hljs-comment">// Google Firebase Docs:</span>
    <span class="hljs-comment">// https://firebase.google.com/docs/cloud-messaging/http-server-ref</span>
    notificationParams: {
      <span class="hljs-comment">// high|normal, &apos;high&apos; will send message immediately</span>
      <span class="hljs-comment">// https://firebase.google.com/docs/cloud-messaging/concept-options</span>
      priority: <span class="hljs-string">&apos;high&apos;</span>,

      <span class="hljs-comment">// ringtone played when the message is received</span>
      sound: <span class="hljs-string">&apos;sms_alert_input.caf&apos;</span>, <span class="hljs-comment">// other possible value: &apos;sms_alert_popcorn.caf&apos;</span>

      <span class="hljs-comment">// The value of the badge on the home screen app icon.</span>
      <span class="hljs-comment">// If not specified, the badge is not changed.</span>
      <span class="hljs-comment">// If set to 0, the badge is removed.</span>
      badge: <span class="hljs-string">&apos;1&apos;</span>
    }
  }
}
</code></pre>
<h2 id="integrations">Integrations</h2>
<h4 id="hugo">HuGO</h4>
<pre><code class="lang-js">hugo: {
  resource: {
    enabled: <span class="hljs-literal">true</span>,
    host: <span class="hljs-string">&apos;hugo-api.customer.com&apos;</span>,
    customer: <span class="hljs-string">&apos;yourCustomerKey&apos;</span>
  print: {
    enabled: <span class="hljs-literal">true</span>,
    host: <span class="hljs-string">&apos;hugo-api-pss.customer.com&apos;</span>,
    xmlRoot: <span class="hljs-string">&apos;articleUpload&apos;</span>  <span class="hljs-comment">// XML root element for print endpoints</span>
  }
}
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../server-extensions/events.html" class="navigation navigation-prev " aria-label="Previous page: Available Events">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="channel-config.html" class="navigation navigation-next " aria-label="Next page: Configure channels">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Configure the server","level":"3.3.4","depth":2,"next":{"title":"Configure channels","level":"3.3.5","depth":2,"path":"reference-docs/server-configuration/channel-config.md","ref":"reference-docs/server-configuration/channel-config.md","articles":[]},"previous":{"title":"Available Events","level":"3.3.3","depth":2,"path":"reference-docs/server-extensions/events.md","ref":"reference-docs/server-extensions/events.md","articles":[]},"dir":"ltr"},"config":{"plugins":["livereload"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"Livingdocs","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Livingdocs Technical Documentation","gitbook":"*","description":"Technical documentation of the Livingdocs CMS. Covers documentation for designers, integrators and core developers"},"file":{"path":"reference-docs/server-configuration/config.md","mtime":"2017-08-14T13:11:48.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2017-08-15T12:39:59.671Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

